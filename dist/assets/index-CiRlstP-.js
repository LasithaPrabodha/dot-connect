(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&t(h)}).observe(document,{childList:!0,subtree:!0});function c(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=c(e);fetch(e.href,s)}})();const I=10,v=10,L={AI:"AI",HUMAN:"HUMAN"};function T(i,o){return i>=0&&i<I&&o>=0&&o<v}function j(i,o,c,t){return t[i][o]===c}function F(){return Array.from({length:I},()=>Array(v).fill(!1))}function G(i,o,c,t){const e=Math.abs(c-i),s=Math.abs(t-o);return e<=1&&s<=1&&e+s!==0}function K(i,o,c,t){return!(!(i===c)&&!(o===t)||!G(i,o,c,t))}class J{constructor(o,c){this.row=o,this.col=c,this.next=null}}class x{constructor(){this.head=null,this.tail=null,this.length=0}append(o,c){const t=new J(o,c);this.head?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),this.length++}remove(o,c){if(!this.head)return;let t=this.head,e=null;for(;t;){if(t.row===o&&t.col===c){e?(e.next=t.next,t.next||(this.tail=e)):(this.head=t.next,t.next||(this.tail=null)),this.length--;break}e=t,t=t.next}}contains(o,c){let t=this.head;for(;t!==null;){if(t.row===o&&t.col===c)return!0;t=t.next}return!1}}function Q(i){let o=new x;function c(e,s,h,g,w){g[e][s]=!0,w.append(e,s);const y=[[-1,0],[1,0],[0,-1],[0,1]];for(const[u,a]of y){const m=e+u,f=s+a;T(m,f)&&j(m,f,h,i)&&!g[m][f]&&c(m,f,h,g,w)}if(w.length>o.length){const u=new x;let a=w.head;for(;a;)u.append(a.row,a.col),a=a.next;o=u}g[e][s]=!1,w.remove(e,s)}const t=F();for(let e=0;e<I;e++)for(let s=0;s<v;s++)if(!t[e][s]){const h=i[e][s];c(e,s,h,t,new x)}return o}const P=i=>new Promise(o=>setTimeout(o,i));document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("game-grid"),o=[],c=document.getElementById("score-value-1"),t=document.getElementById("score-value-2"),e=document.getElementById("gm-human"),s=document.getElementById("gm-ai"),h=document.getElementById("start-button"),g=document.querySelector(".game-mode"),w=document.querySelector(".game-wrapper");let y=0,u=null,a=null,m=[0,0],f=new x;function S(){i.innerHTML="";for(let n=0;n<I;n++){o[n]=[];for(let r=0;r<v;r++){const l=document.createElement("div"),d=b();l.classList.add("dot"),l.dataset.color=d,l.dataset.row=n,l.dataset.col=r,i.appendChild(l),o[n][r]=d}}}function b(){const n=["red","blue","green","yellow"];return n[Math.floor(Math.random()*n.length)]}function B(n){const r=n.target,l=r.dataset.color,d=+r.dataset.row,A=+r.dataset.col;z(r,l,d,A)}function V(n,r,l){f.contains(r,l)?(f.remove(r,l),n.classList.remove("selected")):(f.append(r,l),n.classList.add("selected"))}function U(){document.querySelector(`#score${y+1}`).classList.remove("turn"),y=+!y,document.querySelector(`#score${y+1}`).classList.add("turn")}function $(){D(f.length),q(),U(),f=new x}async function z(n,r,l,d){if(isNaN(l)&&isNaN(d))return;V(n,l,d);let A=!1;if(a&&a.color===r&&(A=K(a.row,a.col,l,d)),A){const Y=[[-1,0],[1,0],[0,-1],[0,1]];let C=!1;for(const[H,p]of Y){const E=l+H,M=d+p;T(E,M)&&j(E,M,r,o)&&!f.contains(E,M)&&(C=!0)}if(!C){if(await P(300),$(),u===L.AI&&y==1){let p=Q(o).head;for(;p;){const E=document.querySelector(`.dot[data-row="${p.row}"][data-col="${p.col}"]`);V(E,p.row,p.col),await P(300),p=p.next}$()}return}}else if(a){await P(300),q(!1),f=new x;return}a={row:l,col:d,color:r}}function D(n){y===0?(m[0]+=n,c.textContent=m[0],m[0]>=100&&(alert(`${u===L.AI?"You win!":"Player 1 wins!"}`),N())):(m[1]+=n,t.textContent=m[1],m[1]>=100&&(alert(`${u===L.AI?"AI":"Player 2"} wins!`),N()))}function q(n=!0){let r=f.head;for(;r!==null;){const l=document.querySelector(`.dot[data-row="${r.row}"][data-col="${r.col}"]`);l.classList.remove("selected"),n&&W(l,o,r),r=r.next}a=null}function W(n,r,l){const d=b();n.dataset.color=d,r[l.row][l.col]=d}function O(){const n=[0,1];n.forEach(r=>document.querySelector(`#score${r+1}`).classList.remove("turn")),u===L.HUMAN?y=n[Math.floor(Math.random()*n.length)]:y=0,document.querySelector(`#score${y+1}`).classList.add("turn"),m=[0,0],c.textContent=0,t.textContent=0,w.classList.add("started")}function N(){u=null,h.style.display="none",g.style.display="flex",w.classList.remove("started")}h.addEventListener("click",n=>{u==null&&(n.target.style.display="none",g.style.display="flex")}),e.addEventListener("click",()=>{u=L.HUMAN,g.style.display="none",document.getElementById("p1").innerText="Player 1",document.getElementById("p2").innerText="Player 2",O(),S()}),s.addEventListener("click",()=>{u=L.AI,g.style.display="none",document.getElementById("p1").innerText="Your",document.getElementById("p2").innerText="AI",O(),S()}),i.addEventListener("mousedown",n=>{Object.keys(n.target.dataset).length&&B(n)}),i.addEventListener("mouseover",function(n){n.buttons==1&&Object.keys(n.target.dataset).length&&B(n)}),document.getElementById("reset").addEventListener("click",()=>{N()})});
